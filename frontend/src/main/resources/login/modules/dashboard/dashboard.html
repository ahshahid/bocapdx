<div ng-controller="dashboardController" ng-init="init()">
  <!-- Sidebar -->
  <div class="sidebar-menu toggle-others main-sidebar">
			
    <div class="sidebar-menu-inner">	
        
        <header>
            <div class="logo">
              <div class="navbar-header">
                <a class="navbar-brand" ng-href="/#!/dashboard"><img src="../../assets/Fast-Insights-Logo.png"></a>
              </div>
            </div>
        </header>
        <ul id="main-menu" class="main-menu">
            <li>
                <a ng-href="/#!/dashboard">
                    <img src="../../assets/Icon 1_Left Nav_Pinboard.png">
                    <span class="title">Pinboard</span>
                </a>
            </li>
            <li>
                <a ng-href="/#!/dashboard">
                  <img src="../../assets/Icon 2_Left Nav_Objective.png">
                  <span class="title">Objetive</span>
                </a>
            </li>
            <li>
                <a ng-href="/#!/dashboard">
                  <img src="../../assets/Icon 3_Left Nav_Metabase.png">
                  <span class="title">Explore with Metabase</span>
                </a>
            </li>
            <li>
                <a ng-href="/#!/dashboard">
                  <img src="../../assets/Icon 4_Left Nav_Settings.png">
                  <span class="title">Settings</span>
                </a>
            </li>
            <li>
              <a ng-href="/#!/dashboard">
                  <img src="../../assets/Icon 5_Left Nav_Help.png">
                  <span class="title">Help</span>
              </a>
          </li>
        </ul>
      </div>
    </div>
  <!-- End sidebar -->
  <!-- Header start -->
    <nav class="navbar navbar-boca">
        <div class="container-fluid">
            
        <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="" id="bs-example-navbar-collapse-1">
            <form class="navbar-form navbar-left" role="search">
              <div class="form-group">
                <i class="icon-reorder more-option"></i>
                <p class="custom-text-p"><span>My Objective </span>
                  <input type="text" class="form-control pull-left" ng-model="objective" placeholder="Enter your objective here"> 
                    <a class="link-obj"><img src="../../assets/Icon 8_Increase.png" width="40"></a>
                    <a class="link-obj"><img src="../../assets/Icon 9_Decrease.png" width="40"></a>
                  <!-- <i class="icon-long-arrow-up active"></i>
                  <i class="icon-long-arrow-down"></i> -->
                </p>
              </div>
            </form>
            <ul class="nav navbar-nav navbar-right custom-color">
              <li><a ><img class="img-icon" src="../../assets/Icon 10_Share.png"></a></li>
              <li><a ><img class="img-icon" src="../../assets/Icon 1_Left Nav_Pinboard.png"></a></li>
            </ul>
          </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>
      <!-- Header Ends -->
      
      <!-- main container -->
      <div class="row">
        
      <!-- Sidebar start -->
      <div class="data-set-column no-padding-left no-padding-right" class="md-toolbar-tools">
        <div class="sidebar-menu toggle-others">
			
            <div class="sidebar-menu-inner">	
                
                <header class="logo-env">
                    <div class="logo">
                        <a ng-href="/#!/dashboard" class="logo-expanded">
                          Datasets
                        </a>
                    </div>
                    <a ng-click="refreshTables()"><i class="icon-backward pull-right blue-color" ></i></a>
                    <input type="text" placeholder="Search Datasets" class="theme-style">
                </header>
                
                <ul id="data-table" class="main-menu" drop-on-me >
                    <li ng-click="getData(table); $event.preventDefault()" ng-repeat="table in tableNames track by $index">
                        <input type="checkbox" id="{{table}}" ng-model="myTable.selected[table]" class="pull-right" >
                        <label drag-me for="{{table}}" id="{{table}}" class="title"  tooltip-placement="top" uib-tooltip="{{table}}"><span>{{table}}</span></label>
                    </li>
                </ul>
            </div>
        </div>
      </div>
      <!-- Sidebar Ends -->

    <div class="tab-container">
      <!-- Tab headers Start -->
      <ul class="nav nav-tabs"  role="tablist">
        <li role="presentation" class="active">
          <a  aria-controls="worksheetTab" role="tab" data-toggle="tab" data-target="#worksheetTab" ng-click="goToTab('worksheet')">My Worksheet</a>
        </li>
        <li role="presentation" ng-if="influncer">
          <a aria-controls="influncer" role="tab" data-target="#influncer" data-toggle="tab" ng-click="goToTab('influncer')">Influencer Insights</a>
        </li>
        <li role="presentation" ng-if="deepExplanationTabLink">
          <a aria-controls="deepExplanation" role="tab" data-target="#deepExplanation" data-toggle="tab" ng-click="goToTab('deepExplanation')">Deep Explanations</a>
        </li>
      </ul>
      <!-- Tab headers End -->

      <!-- worksheetTab Start -->
      <div class="tab-content">
      <div class="panel panel-gray worksheet-tab tab-pane active"  role="tabpanel" ng-show="worksheetTab" id="worksheetTab">
        
        <div class="panel-body"  id="worksheet" drop-on-me callback-fn="getData(table,true)" style="position: relative;">
          <div class="table-details " ng-repeat="table in workSheetTables" ng-if="worksheet"  ng-draggable='dragOptions' style="cursor: move;">
           <p>{{table.name}}</p>
            <p>Columns: {{table.colCount}}<br>
              Rows: {{table.rowCount}}
            </p>
          </div>
          <div class="table-drop-message" ng-if="!worksheet">
            <p>Drag and Drop tables from the left panel or select with the help of checkoboxes to add to the worksheet</p>
          </div>
        </div>
        <div class="row-search-panel">
          <p class="custom-text-p">
          <input type="text" class="theme-style" placeholder="Search Columns" ></p>
          <!-- Single button -->
          <div class="filters">
            <button ng-disabled="!isColumnSelected" type="button" class="btn mar-top-10" >
              <img src="../../assets/Icon 11_Auto Classify_Disabled.png" >Auto-classify Outliers
            </button>
              <button ng-disabled="!isColumnSelected" type="button"  data-toggle="modal" data-target="#outlierModel" class="btn mar-top-10 right-btn">
                <img src="../../assets/Icon 12_Outlier Filter_Disabled.png" >Outlier Filter <!-- <span class="caret"></span> -->
              </button>
          </div>
          <button ng-disabled="!isColumnSelected" type="button" ng-click="updateColumnList('deepExplanation')" class="btn blue-btn pull-right mar-top-10" >
            Deep Explanations
          </button>
          <button ng-disabled="!isColumnSelected" type="button" ng-click="updateColumnList('instantInsight')" class="btn blue-btn pull-right mar-top-10" style="margin-right: 20px;">
            Influencer Insights
          </button>
          
        </div>
        <div class="panel-body table-rows-section" >
          <div  ng-if="schemaCols.length > 0">
            <table class="table table-bordered" show-filter="false" ng-table-dynamic="schemaRows with schemaCols" >
              <colgroup>
                <col ng-repeat="column in columnList" id="{{column.name}}">
                </colgroup>
                <tr ng-repeat="data in $data track by $index">
                    <td ng-repeat="d in data">{{d}}<!-- {{d}} --></td>
                  <!--  <td filter="{ $in: 'number'}" sortable="'type'">{{data[1]}}</td> -->
                </tr>
            </table>
          </div>
        </div>
      </div>
      <!-- worksheetTab End -->

      <!-- influncerTab Start -->
      <div class="panel panel-gray tab-pane"  role="tabpanel" ng-show="influncerTab"  id="influncer">
        <div class=" selected-list">
          <h6>Insights based on 
            <i  ng-click="editPopup()" class="icon-pencil pull-right" ></i></h6>
          <ul class="column-list-selected" >
            <li  ng-repeat="cols in selectedCols track by $index">
                <label for="{{cols}}" id="{{cols}}" class="title"><span>{{cols}}</span></label> 
            </li>
          </ul>
        </div>
        <!-- Charts  -->
        <div class="chart-panel ">
          <h4 style="margin-left: 10px;">We looked into 12555522 rows of data in 135 secs to find out results on 8 factors affecting the most.</h4>
          <div id="barChartContainer">
            <div class="charts-details">
              <div class="discription">
              <h6>Chart titles goes here</h6>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce tempus eu erat eu hendrerit.
                Nullam vulputate sagittis mauris, quis laoreet lacus hendrerit ut. Etiam gravida bibendum lacus 
                ac eleifend.</p>
              </div>
                <div class="controls">
                  <a class="img-links"><img src="../../assets/Icon 22_More Actions.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 23_Like.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 24_Dislike.png" width="20px"> </a>
                </div>
            </div>
            <div id="barChart" style="width: 100%; height: calc(100% - 75px);"></div>
          </div>
          <div id="areaChartContainer">
            <div class="charts-details">
              <div class="discription">
              <h6>Chart titles goes here</h6>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce tempus eu erat eu hendrerit.
                Nullam vulputate sagittis mauris, quis laoreet lacus hendrerit ut. Etiam gravida bibendum lacus 
                ac eleifend.</p>
              </div>
                <div class="controls">
                  <a class="img-links"><img src="../../assets/Icon 22_More Actions.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 23_Like.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 24_Dislike.png" width="20px"> </a>
                </div>
            </div>
            <div id="areaChart" style="width: 100%; height: calc(100% - 75px);"></div>
          </div>
          <div id="lineChartContainer">
            <div class="charts-details">
              <div class="discription">
              <h6>Chart titles goes here</h6>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce tempus eu erat eu hendrerit.
                Nullam vulputate sagittis mauris, quis laoreet lacus hendrerit ut. Etiam gravida bibendum lacus 
                ac eleifend.</p>
              </div>
                <div class="controls">
                  <a class="img-links"><img src="../../assets/Icon 22_More Actions.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 23_Like.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 24_Dislike.png" width="20px"> </a>
                </div>
            </div>
            <div id="lineChart" style="width: 100%; height: calc(100% - 75px);"></div>
          </div>
          <div id="pieChartContainer">
            <div class="charts-details">
              <div class="discription">
              <h6>Chart titles goes here</h6>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce tempus eu erat eu hendrerit.
                Nullam vulputate sagittis mauris, quis laoreet lacus hendrerit ut. Etiam gravida bibendum lacus 
                ac eleifend.</p>
              </div>
                <div class="controls">
                  <a class="img-links"><img src="../../assets/Icon 22_More Actions.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 23_Like.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 24_Dislike.png" width="20px"> </a>
                </div>
            </div>
            <div id="pieChart" style="width: 100%; height: calc(100% - 75px);"></div>
          </div>
          <div id="bubbleChartContainer">
            <div class="charts-details">
              <div class="discription">
              <h6>Chart titles goes here</h6>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce tempus eu erat eu hendrerit.
                Nullam vulputate sagittis mauris, quis laoreet lacus hendrerit ut. Etiam gravida bibendum lacus 
                ac eleifend.</p>
              </div>
                <div class="controls">
                  <a class="img-links"><img src="../../assets/Icon 22_More Actions.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 23_Like.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 24_Dislike.png" width="20px"> </a>
                </div>
            </div>
            <div id="bubbleChart" style="width: 100%; height: calc(100% - 75px);"></div>
          </div>
        </div>
        <!-- Charts  End-->
        </div>
      <!-- influncerTab End -->

      <!-- Deep Explanation Tab Start -->
      <div class="panel panel-gray tab-pane"  role="tabpanel" ng-if="deepExplanationTab"  id="deepExplanation">
        <div class=" selected-list">
          <h6>Explanations based on 
            <i ng-click="editPopup('deepExplanation')" class="icon-pencil pull-right"></i></h6>
          <ul class="column-list-selected" >
            <li  ng-repeat="cols in selectedCols track by $index">
                <label for="{{cols}}" id="{{cols}}" class="title"><span>{{cols}}</span></label> 
            </li>
          </ul>
          <div class="slider-container pad-15">
            <label>Explain Rare Events</label>
            <input type="range" min="1" max="100" ng-disabled="true" ng-model="rareEvent" class="slider" id="rareEvents" tooltip-placement="top" uib-tooltip="{{rareEvent}}">
            <div class="range pull-left">
              <span>1</span>
              <span class="lable">Very Common</span>
            </div>
            <div class="range pull-right">
              <span>100</span>
              <span class="lable">Very Rare</span>
            </div>
          </div>
          <div class="slider-container pad-15">
            <label>Explain Risk Ratio</label>
            <input type="range" min="100" max="500" ng-disabled="true" ng-model="riskRatio" class="slider" id="riskRatios" tooltip-placement="top" uib-tooltip="{{riskRatio}}" >
            <div class="range pull-left">
              <span>100</span>
              <span class="lable">Low</span>
            </div>
            <div class="range pull-right">
              <span>500</span>
              <span class="lable">Very High</span>
            </div>
          </div>
        </div>
        <!-- Charts Section start-->
        <div class="chart-panel ">
          <h4 style="margin-left: 10px;">We looked into {{rowCount}} rows of data in {{respTime}} secs to find out results on 8 factors affecting the most.</h4>
          <a class="link-share"><img src="../../assets/Icon 3_Left Nav_Metabase.png" width="30px"> </a>
          <div ng-repeat="deepEx in deepExplanationList track by $index">
          <div class="auto-panel">
            <div class="charts-details">
              <div class="discription">
              <p class="deep-p">{{deepEx.explanationStr}}</p>
              </div>
                <div class="controls">
                  <a class="img-links"><img src="../../assets/Icon 22_More Actions.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 23_Like.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 24_Dislike.png" width="20px"> </a>
                </div>
                <p class="more"><a class="more-link">Explain Further</a></p>
            </div>
          </div>
          <div class="auto-panel" id="scroll{{$index}}" ng-init="runDeepExplaination(deepEx, $index)">
            <div class="charts-details">
              <div class="discription graph-description">
              <!-- <p>{{deepEx.graphs}}</p> -->
              <div id="graph{{$index}}" style="width: 100%; height: calc(100% - 75px);"></div>
              <p class="more"><a class="more-link">Explain Further</a></p>
              </div>
                <div class="controls">
                  <a class="img-links"><img src="../../assets/Icon 22_More Actions.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 23_Like.png" width="20px"> </a>
                  <a class="img-links"><img src="../../assets/Icon 24_Dislike.png" width="20px"> </a>
                </div>
            </div>
            
          </div>
        </div>
          
        </div>
        <!-- Charts Section End-->
        </div>
      </div>
        <!-- Deep Explanation Tab Ends -->
    </div>
    </div>


    <!-- Model(Popup) start -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 ng-if="!deepExplanation"  class="modal-title" id="myModalLabel">Influencer Insights based on</h4>
            <h4 ng-if="deepExplanation" class="modal-title" id="myModalLabel">Deep Explanations based on</h4>
          </div>
          <div class="modal-body">
            <div class="column">
              <h3>Available Columns</h3>
              </div>
              <div class="column mar-left-4">
                <h3>Selected Columns</h3>
                </div>
            <!-- <input type="text" style="margin-top: 0; margin-bottom: 15px;" placeholder="Search Columns" class="theme-style"> -->
           <div class="column">
             <ul class="column-list">
              <li ng-click="addColumn(cols); $event.preventDefault()" ng-repeat="cols in colsForSelection track by $index">
                  <input type="checkbox" id="{{cols}}Test" ng-model="selectedColumns.selected[cols]" class="pull-right" >
                  <label for="{{cols}}Test" id="{{cols}}Test" class="title"><span>{{cols}}</span></label>
              </li>
            </ul>
              <div class="slider-container" ng-if="deepExplanation">
                <label>Explain Rare Events</label>
                <span class="editLink"><a class="link" data-toggle="modal" data-target="#rareEventModel">Edit Range</a></span>
                <input type="range" min="{{minRareEvent}}" max="{{maxRareEvent}}" step="{{stepRareEvent}}" ng-model="rareEvent" class="slider" id="rareEvent" tooltip-placement="top" uib-tooltip="{{rareEvent}}">
                <div class="range pull-left">
                  <span>{{minRareEvent}}</span>
                  <span class="lable">Very Common</span>
                </div>
                <div class="range pull-right">
                  <span>{{maxRareEvent}}</span>
                  <span class="lable">Very Rare</span>
                </div>
              </div>
              <button type="button" class="btn popup-btn pull-right" data-dismiss="modal">Cancel</button>
              <!-- <button type="button" class="btn popup-btn pull-right" ng-if="deepExplanation"  data-dismiss="modal">Cancel</button> -->
           </div>
           <div class="column mar-left-4">
            <ul class="column-list" >
              <li  ng-repeat="cols in selectedCols track by $index">
                  <label for="{{cols}}" id="{{cols}}" class="title"><span>{{cols}}</span></label>
                  <button type="button" class="close"  ng-click="removeColumn(cols); $event.preventDefault()">
                    <span>&times;</span>
                  </button>
              </li>
            </ul>
            <div class="slider-container" ng-if="deepExplanation">
              <label>Explain Risk Ratio</label>
              <span class="editLink"><a class="link" data-toggle="modal" data-target="#riskRationModel">Edit Range</a></span>
              <input type="range" min="{{minRiskRatio}}" max="{{maxRiskRatio}}" step="{{stepRiskRatio}}" ng-model="riskRatio" class="slider" id="riskRatio" tooltip-placement="top" uib-tooltip="{{riskRatio}}" >
              <div class="range pull-left">
                <span>{{minRiskRatio}}</span>
                <span class="lable">Low</span>
              </div>
              <div class="range pull-right">
                <span>{{maxRiskRatio}}</span>
                <span class="lable">Very High</span>
              </div>
            </div>
            <button type="button" class="btn popup-btn red-bg pull-left" ng-if="!deepExplanation" ng-click="goToTab('influncer')">Submit</button>
            <button type="button" class="btn popup-btn red-bg pull-left" ng-if="deepExplanation" ng-click="goToTab('deepExplanation')">Run</button>
          </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Model(Popup) End -->

    <!-- outlier popup start-->
    <div class="modal fade" id="outlierModel" tabindex="-1" role="dialog" aria-labelledby="outlier">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Outlier Filter</h4>
          </div>
          <div class="modal-body">
            <input type="text" ng-model="outlierFilter" style="margin-top: 35px; margin-bottom: 15px;" placeholder="Type" class="theme-style">
           <div class="column">
              <button type="button" class="btn popup-btn pull-right" data-dismiss="modal" >Cancel</button>
           </div>
           <div class="column mar-left-4">
            <button type="button" class="btn popup-btn red-bg pull-left" ng-click="applyOutlier()">Apply</button>
          </div>
          </div>
        </div>
      </div>
    </div>
    <!-- outlier popup end-->

    <!-- Rare event edit pop end-->
    <div class="modal fade" id="rareEventModel" tabindex="3" role="dialog" aria-labelledby="rareEventModel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Rare Events Range</h4>
          </div>
          <div class="modal-body">
            <div class="column">
              <h3>Start Value</h3>
              <input type="number" ng-model="minRareEventEdit" style="margin-top: 0; margin-bottom: 15px;" placeholder="Type" class="theme-style">
           </div>
           <div class="column mar-left-4">
              <h3>End Value</h3>
              <input type="number" ng-model="maxRareEventEdit" style="margin-top: 0; margin-bottom: 15px;" placeholder="Type" class="theme-style">
          </div>
            
           <div class="column">
              <button type="button" class="btn popup-btn pull-right" data-dismiss="modal" >Cancel</button>
           </div>
           <div class="column mar-left-4">
            <button type="button" class="btn popup-btn red-bg pull-left" ng-click="applyRareEventRange()">Apply</button>
          </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Rare event edit pop end-->

    <!-- Risk Ratio edit pop end-->
    <div class="modal fade" id="riskRationModel" tabindex="-2" role="dialog" aria-labelledby="riskRationModel">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Risk Ratio Range</h4>
          </div>
          <div class="modal-body">
            <div class="column">
              <h3>Start Value</h3>
              <input type="text" ng-model="minRiskRatioEdit" style="margin-top: 0; margin-bottom: 15px;" placeholder="Type" class="theme-style">
           </div>
           <div class="column mar-left-4">
              <h3>End Value</h3>
              <input type="text" ng-model="maxRiskRatioEdit" style="margin-top: 0; margin-bottom: 15px;" placeholder="Type" class="theme-style">
          </div>
            
           <div class="column">
              <button type="button" class="btn popup-btn pull-right" data-dismiss="modal" >Cancel</button>
           </div>
           <div class="column mar-left-4">
            <button type="button" class="btn popup-btn red-bg pull-left" ng-click="applyRiskRatioRange()">Apply</button>
          </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Risk Ratio edit pop end-->
</div>

